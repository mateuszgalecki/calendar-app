(this["webpackJsonpexample-site"]=this["webpackJsonpexample-site"]||[]).push([[0],{39:function(e,t,a){},40:function(e,t,a){},48:function(e,t,a){e.exports=a(70)},53:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),c=a.n(o),s=(a(53),a(23)),i=a(24),l=a(30),u=a(25),m=a(31),d=(a(39),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleEmailChange=function(e){a.setState({email:e.target.value})},a.handlePasswordChange=function(e){a.setState({password:e.target.value})},a.state={email:"",password:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.createANewAccount(this.state.email,this.state.password)}},{key:"render",value:function(){return r.a.createElement("section",{className:"signIn"===this.props.showMe?"onTheLeft fullScreen primaryView slideLeft":"onTheLeft fullScreen primaryView hideMe"},r.a.createElement("form",{className:"primaryView",onSubmit:this.handleSubmit.bind(this)},r.a.createElement("input",{onChange:this.handleEmailChange,value:this.state.email,type:"email",placeholder:"email"}),r.a.createElement("input",{onChange:this.handlePasswordChange,value:this.state.password,type:"text",placeholder:"password",className:"pushUp"}),r.a.createElement("input",{type:"submit",value:"create a new account",className:"pushUp add_res_button"})),r.a.createElement("button",{className:"back_button",onClick:this.props.goBack},"back"))}}]),t}(n.Component)),h=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleEmailChange=function(e){a.setState({email:e.target.value})},a.handlePasswordChange=function(e){a.setState({password:e.target.value})},a.state={email:"",password:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.logIn(this.state.email,this.state.password)}},{key:"render",value:function(){return r.a.createElement("section",{className:"logIn"===this.props.showMe?"onTheLeft fullScreen primaryView slideRight":"onTheLeft fullScreen primaryView"},r.a.createElement("form",{className:"primaryView",onSubmit:this.handleSubmit.bind(this)},r.a.createElement("input",{onChange:this.handleEmailChange,value:this.state.email,type:"email",placeholder:"email"}),r.a.createElement("input",{onChange:this.handlePasswordChange,value:this.state.password,type:"text",placeholder:"password",className:"pushUp"}),r.a.createElement("input",{type:"submit",value:"log in",className:"pushUp add_res_button"})),r.a.createElement("button",{className:"back_button",onClick:this.props.goBack},"back"))}}]),t}(n.Component),v=a(6);function f(){var e=Object(v.b)(),t=re().screenActions.logIn,a=re().screenActions.signIn;return r.a.createElement("section",{className:"fullScreen primaryView",id:"trytry"},r.a.createElement("h1",{className:"welcome_header"},"Welcome to our restaurant calendar!"),r.a.createElement("button",{className:"add_res_button",onClick:function(){e(t())}},"log in"),r.a.createElement("button",{className:"add_res_button",onClick:function(){e(a())}},"sign in"),r.a.createElement("div",{className:"positioning_div"}))}a(58),a(40);var p=a(72);var b=function(e){var t=e.data,a=[];t[1].length>0&&t[1].forEach((function(e){a.push(e)}));var n=Object(p.a)(t[0]),o="activeDay";n>0||(n="",o="passiveDay");var c=t[0].toString();return r.a.createElement("div",{onClick:function(){"activeDay"===o&&e.viewDay(c,t[0])},className:"Day "+o},n)},y=a(83),E=(a(59),function(e){var t=Object(v.b)(),a=re().restaurantActions.setResName,n=re().restaurantActions.setResPhone,o=Object(v.c)((function(e){return e.restaurant})).resName,c=Object(v.c)((function(e){return e.restaurant})).resPhone,s=Object(y.a)(e.day,"EEEE', the ' do ' of ' LLLL ' ' y");return r.a.createElement("section",{className:"temporaryPin fullScreen primaryView "+e.showClass},r.a.createElement("p",null,"Hello, You're making a reservation for ",s,". For the name please use only letters and for the telephone number, please use numbers or a plus sign."),r.a.createElement("p",null,"Your Name:"),r.a.createElement("input",{onChange:function(e){t(a(e.target.value))},value:o,onBlur:function(e){e.target.value.match(/^[A-Za-z]+$/)||(e.target.value="",alert("for the name, please use letters only"))},type:"text"}),r.a.createElement("p",null,"Your telephone number:"),r.a.createElement("input",{onChange:function(e){t(n(e.target.value))},value:c,onBlur:function(e){e.target.value.match(/^[+-]?\d+$/)||(e.target.value="",alert("for the phone number, please use numbers and plus sign only"))},type:"tel"}),r.a.createElement("button",{className:"add_res_button",onClick:function(){return e.addReservation(e.day,e.selectedHourSpan,e.selectedTables,o,c)}},"add a reservation"),r.a.createElement("button",{className:"back_button",onClick:e.goBack},"back"))}),g=function(e){var t=Object(v.b)(),a=Object(v.c)((function(e){return e.restaurant})).hourSpan[0],n=Object(v.c)((function(e){return e.restaurant})).hourSpan[1],o=Object(v.c)((function(e){return e.restaurant})).bookingScreen,c=re().restaurantActions.setLowerValue,s=re().restaurantActions.setUpperValue,i=re().viewDayActions.setViewDay,l=re().restaurantActions.setTable,u=re().restaurantActions.switchBookingScreen,m=re().restaurantActions.setTableAsFalse,d=Object(v.c)((function(e){return e.restaurant})).tablesArray,h=[[],[],[],[],[],[],[],[],[],[]];void 0!==e.data[0]&&e.data.forEach((function(e){var t=e.date.slice(11,16);e.info.spots.forEach((function(a){h[a-1].push([t,e.info.duration])}))}));var f=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Array(Math.floor((t-e)/a)+1).fill(e).map((function(e,t){return e+t*a}))},p=new Date(e.day),b=Object(y.a)(p,"EEEE, do LLLL yyyy");function g(e){var t=Math.floor(e/60),a=e%60;return 0===a&&(a="00"),1===t.toString().length&&(t="0"+t.toString()),t+":"+a}function w(e){return 60*Number(e.slice(0,2))+Number(e.slice(3,5))}for(var A=function(e){e.target.value=""},N=[],k=480;k<=1320;k+=30)N.push(g(k));var O=function(){console.log("taken")},j=function(){var e=!1;d.forEach((function(t){t&&(e=!0)})),e&&t(u())},S=o?" hideMe":"";return r.a.createElement("div",null,r.a.createElement("section",{className:"restaurantView center primaryView fullScreen"+S},r.a.createElement("p",null,b),r.a.createElement("br",null),r.a.createElement("p",null,"Choose the hour, select the tables that You want to book and click \"add a reservation\" button. If the tables are red, it means, that they're taken in the given hour span. Keep in mind, that the reservation must last at least two hours (and You won't be able to choose a smaller hour span). You have to select at least one table."),r.a.createElement("br",null),r.a.createElement("input",{type:"text",list:"hours",value:a,onFocus:A,onChange:function(e){t(c(e.target.value));var a=w(e.target.value),r=w(n);r-a<120&&t(c(g(r-120))),e.target.blur()}}),r.a.createElement("input",{type:"text",list:"hours",value:n,onFocus:A,onChange:function(e){t(s(e.target.value));var n=w(a);w(e.target.value)-n<120&&t(s(g(n+120))),e.target.blur()}}),r.a.createElement("datalist",{id:"hours"},N.map((function(e,t){return r.a.createElement("option",{key:t,value:e})}))),r.a.createElement("div",{className:"Restaurant"},h.map((function(e,o){var c="table"+(o+1),s=w(n),i=w(a),u=f(i,s,30),h=!1;e.forEach((function(e){var t=w(e[0])+30,a=t+60*e[1]-60;f(t,a,30).forEach((function(e){u.includes(e)&&(h=!0)}))}));var v="",p="";return h?(v="taken",t(m(o))):(p=d[o]?"selected":"",v=""),r.a.createElement("div",{onClick:h?O:function(){return function(e){t(l(e))}(o)},key:o,className:"table "+c+" "+v+p},o+1)}))),r.a.createElement("button",{className:"back_button",onClick:function(){t(i("hide"))}},"back"),r.a.createElement("button",{className:"add_res_button",onClick:j},"add a reservation")),r.a.createElement(E,{addReservation:e.addReservation,selectedTables:d,selectedHourSpan:[a,(w(n)-w(a))/60],goBack:j,showClass:o?"":"hideMe",day:p}))},w=a(82),A=function(e){var t=e.tables.map((function(e){return" ".concat(e)})).toString(),a=Object(w.a)(e.date,"yyyy-MM-dd'T'HH:mm:ss",new Date),n=Object(y.a)(a,"do ' of ' LLLL");return r.a.createElement("div",{className:"users_reservation"},r.a.createElement("div",null,r.a.createElement("p",null,n),r.a.createElement("p",null,"Tables: ",t)),r.a.createElement("button",{onClick:function(){e.deleteAReservation(e.firestoreID)}},"X"))},N=(a(60),function(e){var t=Object(v.b)(),a=re().viewDayActions.setViewDay,n=Object(v.c)((function(e){return e.reservations})).yourReservations;return r.a.createElement("section",{className:"your_reservations primaryView fullScreen"},r.a.createElement("p",{style:{position:"fixed",top:"30px",left:"30px",fontSize:"1.6rem"}},"my reservations:"),n.map((function(t,a){return r.a.createElement(A,{deleteAReservation:e.deleteAReservation,key:a,firestoreID:t.firestoreID,date:t.date,tables:t.info.spots})})),r.a.createElement("button",{className:"back_button",onClick:function(){t(a("hide"))}},"back"))}),k=a(73),O=a(74);var j=function(e){var t=e.reservations,a=e.month,n=Object(v.b)(),o=Object(v.c)((function(e){return e.viewDay})).value,c=re().viewDayActions.setViewDay;if(void 0!==t[0]&&void 0!==t){if(0===t[0][0][0])t.shift();else for(var s=t[0][0][0]-1;s>0;s--)t.unshift([[],[]]);if(0===t[t.length-1][0][0])t.pop();else for(var i=t[t.length-1][0][0];i>1;i--)t.push([[],[]])}var l=function(e,t){Object(k.a)(t,Object(O.a)(new Date,1))<0?alert("dont't make the reservation in the past"):n(c(e))};if("hide"===o)return r.a.createElement("section",{className:"Month fullScreen primaryView"},r.a.createElement("div",{className:"month"},r.a.createElement("div",{className:"monthName"},r.a.createElement("button",{onClick:e.prevMonthFunction,className:"changeMonthBtn prevMonthBtn"},"prev"),["January","February","March","April","May","June","July","August","September","October","November","December"][a],r.a.createElement("button",{onClick:e.nextMonthFunction,className:"changeMonthBtn nextMonthBtn"},"next")),r.a.createElement("div",{className:"monthHeader"},r.a.createElement("div",{className:"dayName"},"MON"),r.a.createElement("div",{className:"dayName"},"TU"),r.a.createElement("div",{className:"dayName"},"WED"),r.a.createElement("div",{className:"dayName"},"THU"),r.a.createElement("div",{className:"dayName"},"FR"),r.a.createElement("div",{className:"dayName"},"SAT"),r.a.createElement("div",{className:"dayName"},"SUN")),t.map((function(e,t){return r.a.createElement(b,{key:t,viewDay:l,data:e})}))),r.a.createElement("button",{className:"back_button",onClick:function(){e.logOut()}},"log out"),r.a.createElement("button",{className:"add_res_button",onClick:function(){n(c("yourReservations"))}},"go to Your reservations"));if("yourReservations"===o)return r.a.createElement(N,{deleteAReservation:e.deleteAReservation});var u=[];return t.forEach((function(e){e[0].toString()===o&&(u=e[1])})),r.a.createElement(g,{addReservation:e.addReservation,day:o,data:u})},S=a(75),C=a(76),R=a(77),D=a(78),M=a(79),_=a(45),T=a(44),I=a(80),V=a(81);var L=function(e){var t=Object(v.b)(),a=Object(v.c)((function(e){return e.user})),n=Object(v.c)((function(e){return e.reservations})).reservations,o=Object(v.c)((function(e){return e.date})).activeMonth,c=Object(v.c)((function(e){return e.date})).currentDate,s=re().dateActions.setActiveMonth,i=re().dateActions.setCurrentDate,l=re().screenActions.month;if(""===c){var u=Object(S.a)(new Date);t(i(u)),t(s(Object(C.a)(new Date)))}for(var m=Object(R.a)(c),d=Object(D.a)(m),h=[],f=0;f<12;f++){for(var b=[],y=Object(M.a)(d),E=Object(_.a)(d),g=0;g<E;g++)b.push([y,[]]),y=Object(T.a)(y,1);if(void 0!==b[0]){var A=Object(I.a)(b[0][0]),N=0;N=0===A?6:A-1,b.unshift([[N],[]]);var k=Object(I.a)(b[b.length-1][0]),O=0;O=0===k?0:7-k,b.push([[O],[]])}h.push(b),d=Object(V.a)(d,1)}0!==n.length&&n.forEach((function(e){var t=Object(w.a)(e.date,"yyyy-MM-dd'T'HH:mm:ss",new Date),a=Object(p.a)(t),n=Object(C.a)(t);void 0!==h[n][a]&&h[n][a][1].push(e)}));var L=h[o];return"no_user"===a.email?r.a.createElement("div",{className:"fullScreen primaryView"},r.a.createElement("div",{className:"loading"}," LOADING ")):"calendar_month"===e.screen?r.a.createElement(j,{deleteAReservation:e.deleteAReservation,addReservation:e.addReservation,logOut:e.logOut,prevMonthFunction:function(){var e=o-1,a=Object(C.a)(new Date);0===o?alert("you can only make reservations for the current year"):e<a?alert("you cannot make a reservation back in time!"):t(s(e))},nextMonthFunction:function(){var e=o+1;11===o?alert("you can only make reservations for the current year"):t(s(e))},month:o,reservations:L}):r.a.createElement("section",{className:"Calendar fullScreen primaryView"},r.a.createElement("h1",null,"RESTAURANT CALENDAR"),r.a.createElement("p",null,"Welcome to our restaurant calendar, ",a.email,"."),r.a.createElement("p",null,"Click on the day that You want to make the reservation on. Choose the tables You'd like to book and click the \"add reservation button\". To specify the menu You'd like to order, please call us."),r.a.createElement("p",null,"We'll make everything to make Your visit at our restaurant pleasurable!"),r.a.createElement("p",null,"Cheers,"),r.a.createElement("p",null,"RESTAURANT'S crew."),r.a.createElement("button",{onClick:function(){return t(l())},className:"goToCurrentMonthBtn primary_button"},"go to the current month"))};var B=function(e){var t=Object(v.c)((function(e){return e.screen})),a=Object(v.b)(),n=re().screenActions.welcome,o=re().screenActions.calendar,c=function(e){a(n()),console.log("go back")},s=function(){a(o()),console.log("hello, calendar")};return t.includes("calendar")?r.a.createElement("div",null,r.a.createElement(L,{deleteAReservation:e.deleteAReservation,addReservation:e.addReservation,logOut:e.logOut,screen:t})):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(h,{showCalendar:s,goBack:c,showMe:t,logIn:e.logIn}),r.a.createElement(d,{showCalendar:s,goBack:c,showMe:t,createANewAccount:e.createANewAccount})),r.a.createElement(f,null))},x=a(14);a(71),a(61),a(63);x.initializeApp({apiKey:"AIzaSyAFE5YT_p3JiDo6rHenm792Ho8dpCzoyOU",authDomain:"restaurant-calendar-2fd31.firebaseapp.com",projectId:"restaurant-calendar-2fd31"});var U=x.firestore(),Y=function(){var e=Object(v.b)(),t=Object(v.c)((function(e){return e.user})),a=re().reservationsActions.stateTheState,n=re().reservationsActions.stateYourReservations,o=re().userActions.setAUser,c=re().screenActions.calendar,s=re().screenActions.welcome,i=re().restaurantActions.switchBookingScreen,l=function(){e(c());setTimeout((function(){x.auth().currentUser?console.log("user succesfully logged and will stay that way"):e(s())}),5e3)};U.collection("reservations").onSnapshot((function(r){var o=[],c=[];r.forEach((function(e){var a={date:e.id.slice(0,19),info:e.data(),firestoreID:e.id};a.info.user===t.email&&c.push(a),o.push(a)})),e(n(c)),e(a(o))}));x.auth().onAuthStateChanged((function(t){t?e(o(t.email)):console.log("woooooooooo")}));return window.innerWidth>500?r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},r.a.createElement("p",null,"Please, view this app via a mobile device simulation. :)")):r.a.createElement("div",{className:"App"},r.a.createElement(B,{deleteAReservation:function(e){U.collection("reservations").doc(e).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}))},addReservation:function(a,n,r,o,c){var s=Object(y.a)(a,"y-MM-dd")+"T"+n[0]+":00",l=1e3*Math.random();s=s.concat(l);var u=[];r.forEach((function(e,t){e&&u.push(t+1)})),U.collection("reservations").doc(s).set({duration:n[1],name:o,phone_number:c,spots:u,user:t.email}).then((function(){alert("reservation succesfully added"),e(i())})).catch((function(e){console.error("Error writing document: ",e)}))},logOut:function(){x.auth().signOut().then((function(){e(s()),e(o("no_user")),console.log("i log outtttttt")})).catch((function(e){console.log(e)}))},showCalendar:l,createANewAccount:function(e,t){x.auth().createUserWithEmailAndPassword(e,t).catch((function(e){var t=e.code,a=e.message;console.log(t,a)})),l()},logIn:function(e,t){x.auth().signInWithEmailAndPassword(e,t).catch((function(e){var t=e.code;console.log(t),"auth/user-not-found"===t&&alert("user does not exist")})),l()}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=a(12),P=a(7);a.d(t,"actionsFunction",(function(){return re}));var H=Object(F.b)({name:"screen",initialState:"welcome",reducers:{welcome:function(e){return"welcome"},logIn:function(e){return"logIn"},signIn:function(e){return"signIn"},calendar:function(e){return"calendar"},month:function(e){return"calendar_month"}}}),W=Object(F.b)({name:"user",initialState:{email:"no_user"},reducers:{setAUser:function(e,t){e.email=t.payload},unsetAUser:function(e){e.email=""}}}),J=Object(F.b)({name:"reservations",initialState:{reservations:[],yourReservations:[]},reducers:{stateTheState:function(e,t){e.reservations=t.payload},stateYourReservations:function(e,t){e.yourReservations=t.payload}}}),z=Object(F.b)({name:"date",initialState:{currentDate:"",activeMonth:0},reducers:{setActiveMonth:function(e,t){e.activeMonth=t.payload},setCurrentDate:function(e,t){e.currentDate=t.payload}}}),$=Object(F.b)({name:"viewDay",initialState:{value:"hide",addReservation:!1},reducers:{setViewDay:function(e,t){e.value=t.payload},setAddReservation:function(e){e.addReservation=!e.addReservation}}}),K=Object(F.b)({name:"restaurant",initialState:{tablesArray:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],hourSpan:["08:00","22:00"],bookingScreen:!1,resName:"",resPhone:""},reducers:{setTable:function(e,t){e.tablesArray[t.payload]=!e.tablesArray[t.payload]},switchBookingScreen:function(e){e.bookingScreen=!e.bookingScreen},setTableAsFalse:function(e,t){e.tablesArray[t.payload]=!1},setLowerValue:function(e,t){e.hourSpan[0]=t.payload},setUpperValue:function(e,t){e.hourSpan[1]=t.payload},setResName:function(e,t){e.resName=t.payload},setResPhone:function(e,t){e.resPhone=t.payload}}}),G=H.reducer,X=J.reducer,Z=W.reducer,q=z.reducer,Q=$.reducer,ee=K.reducer,te=Object(P.combineReducers)({screen:G,reservations:X,user:Z,date:q,viewDay:Q,restaurant:ee}),ae=Object(F.a)({reducer:te}),ne={screenActions:H.actions,reservationsActions:J.actions,userActions:W.actions,dateActions:z.actions,viewDayActions:$.actions,restaurantActions:K.actions};function re(){return ne}c.a.render(r.a.createElement(v.a,{store:ae},r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[48,1,2]]]);
//# sourceMappingURL=main.9367663d.chunk.js.map